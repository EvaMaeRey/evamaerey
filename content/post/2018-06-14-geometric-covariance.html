---
title: Covariance -- A Visual Walk Through
author: Gina Reynolds
date: '2018-06-14'
slug: geometric-covariance
categories: []
tags: []
header:
  caption: ''
  image: ''
---



<p>In a previous post, I’ve looked at walking through the calculation of variance and standard deviation, visualizing each step. This post is dedicated to the visualization of another statistic: covariance.</p>
<p>Covariance is a measure of the joint variability of two random variables.</p>
<p>Let’s have a look at the <em>sample</em> covariance equation over all:</p>
<p><span class="math inline">\(cov(x,y) = \frac{\sum_{i=1}^n (x_i-\overline{x})(y_i-\overline{y})}{n-1}\)</span></p>
<p>And now lets apply the equation to the following case:</p>
<p><img src="/post/2018-06-14-geometric-covariance_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>Ready? Okay, now let’s walk through the calculation; there are 7 small steps:</p>
<div id="step-1-find-the-mean-of-x" class="section level1">
<h1>Step 1: find the mean of x:</h1>
<div id="overlinex" class="section level2">
<h2><span class="math inline">\(\overline{x}\)</span></h2>
<p><img src="/post/2018-06-14-geometric-covariance_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
</div>
</div>
<div id="step-2-find-the-mean-of-y" class="section level1">
<h1>Step 2: find the mean of y</h1>
<div id="overliney" class="section level2">
<h2><span class="math inline">\(\overline{y}\)</span></h2>
<p><img src="/post/2018-06-14-geometric-covariance_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
</div>
<div id="step-3-calculate-difference-between-x-and-mean-of-x" class="section level1">
<h1>Step 3: calculate difference between x and mean of x</h1>
<div id="x_i-overlinex" class="section level2">
<h2><span class="math inline">\(x_i-\overline{x}\)</span></h2>
<p><img src="/post/2018-06-14-geometric-covariance_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
</div>
<div id="step-4-calculate-difference-between-y-and-mean-of-y" class="section level1">
<h1>Step 4: calculate difference between y and mean of y</h1>
<div id="y_i-overliney" class="section level2">
<h2><span class="math inline">\(y_i-\overline{y}\)</span></h2>
<p><img src="/post/2018-06-14-geometric-covariance_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
</div>
<div id="step-5-multiply-these-differences-observation-wise" class="section level1">
<h1>Step 5: multiply these differences (observation-wise)</h1>
<div id="x_i-overlinexy_i-overliney" class="section level2">
<h2><span class="math inline">\((x_i-\overline{x})(y_i-\overline{y})\)</span></h2>
<p><img src="/post/2018-06-14-geometric-covariance_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
</div>
<div id="step-6-add-these-areas" class="section level1">
<h1>Step 6: Add these areas</h1>
<div id="sum_1n-x_i-overlinexy_i-overliney" class="section level2">
<h2><span class="math inline">\(\sum_1^n (x_i-\overline{x})(y_i-\overline{y})\)</span></h2>
<p><img src="/post/2018-06-14-geometric-covariance_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
</div>
<div id="step-7-divide-through-by-number-of-observations-minus-1-the-result-will-a-bit-larger-in-magnitude-than-the-average" class="section level1">
<h1>Step 7: Divide through by number of observations minus 1 (the result will a bit larger in magnitude than the average)</h1>
<div id="covxy-fracsum_i1n-x_i-overlinexy_i-overlineyn-1" class="section level2">
<h2><span class="math inline">\(cov(x,y) = \frac{\sum_{i=1}^n (x_i-\overline{x})(y_i-\overline{y})}{n-1}\)</span></h2>
<p><img src="/post/2018-06-14-geometric-covariance_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>That’s it.</p>
<p>Now we can compare this visualized result to what we would get if we simply trust the R covariance function to calculate this for us.</p>
<pre class="r"><code>sum(df$rectangle)/(nrow(df)-1)</code></pre>
<pre><code>## [1] 0.4766744</code></pre>
<pre class="r"><code>cov(x,y) # Calculation for **sample** covariance</code></pre>
<pre><code>## [1] 0.4766744</code></pre>
<p>Great. It’s a match!</p>
</div>
</div>
<div id="discussion-question" class="section level1">
<h1>Discussion question</h1>
<p>What would the units of unadjusted covariance be for the covariance between life expectancy in years and per capita gdp in dollars?</p>
<p>Note: The normalized version of covariance is Pearson’s correlation coefficient.</p>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<p>R Core Team (2018). R: A
language and environment
for statistical
computing. R Foundation
for Statistical
Computing, Vienna,
Austria. URL
<a href="https://www.R-project.org/" class="uri">https://www.R-project.org/</a>.</p>
<p>H. Wickham. ggplot2:
Elegant Graphics for
Data Analysis.
Springer-Verlag New
York, 2016.</p>
</div>
