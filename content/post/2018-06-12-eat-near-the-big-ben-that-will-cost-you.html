---
title: Eat near the Big Ben?  That will cost you...
author: ''
date: '2018-06-12'
slug: eat-near-the-big-ben-that-will-cost-you
categories: []
tags:
  - MakeoverMonday
header:
  caption: ''
  image: ''
---



<p>What’s the cost of eating near an iconic location? We all might suspect eating in a fun location is pricier. I used the menu and restaurant location data that #MakeoverMonday “assigned” one week last December to demonstrate this among London <a href="https://www.jdwetherspoon.com/">Wetherspoon Pubs</a>.</p>
<p>#MakeoverMonday is a fun data visualization initiative; most participants use Tableau as their preferred visualization tool. But I’ve used R and ggplot() and the organizers and participants have been very welcoming. (Recently, I’ve noticed an initiative for R has sprouted up — #TidyTuesday, with a focus on visualization and data wrangling. Might #MakeoverMonday have been an inspiration? Probably.)</p>
{{% tweet "939065290016555008" %}}
<p>The Wetherspoon Pubs plot that submitted was popular with the organizers of #MakeoverMonday, and it will likely be featured in their soon-to-be-published book on the #MakeoverMonday experience.</p>
{{% tweet "939073785994661888" %}}
<p>You can read Andy Kreible’s complete “lessons” summary on the entries from the Wetherspoon Pubs week <a href="http://www.makeovermonday.co.uk/week-49/">here</a>.</p>
<p>I was happy to be working with some spatial data.</p>
{{% tweet "939405276314259456" %}}
<p>Basically, I did some mapping to explore the data, but suspected that having a closer look at London Pubs might also be interesting. To do that I had to compute distances from longitude and latitude coordinates in R. I just used a pre-written function from the geosphere package to do this.</p>
<p>Below is the code (cleaned-up naturally for this post) used in the exercise.</p>
<div id="step-one-load-needed-packages-and-data" class="section level1">
<h1>Step one: Load needed packages and data</h1>
<pre class="r"><code>library(readxl)    # to load excel data
library(rgdal)     # geospatial library
library(tidyverse) # data wrangling and plotting
library(geosphere) # to calculate distances on the earth
library(viridis)   # for better color palette for points on map
library(ggmap)     # provides maps and mapping tools for ggplot

# Public holiday data
data0=read_xlsx(&quot;Wetherspoon.xlsx&quot;, na = &quot;n/a&quot;) </code></pre>
</div>
<div id="step-2-mapping-data" class="section level1">
<h1>Step 2: Mapping data</h1>
<pre class="r"><code># Loading required package: ggplot2
# Google Maps API Terms of Service: http://developers.google.com/maps/terms.
# Please cite ggmap if you use it: see citation(&#39;ggmap&#39;) for details.

# Mapping data
world_map_df &lt;- map_data(&quot;world&quot;)</code></pre>
<p>I map the UK …</p>
<pre class="r"><code># create a ggplot theme
theme_opts &lt;- list(theme(panel.grid.minor = element_blank(),
                        panel.grid.major = element_blank(),
                        panel.background = element_blank(),
                        plot.background = element_rect(fill=&quot;#e6e8ed&quot;),
                        panel.border = element_blank(),
                        axis.line = element_blank(),
                        axis.text = element_blank(),
                        axis.ticks = element_blank(),
                        axis.title = element_blank(),
                        plot.title = element_text(size=15)))

g &lt;- ggplot(world_map_df %&gt;% 
              filter(region==&quot;UK&quot;), aes(long,lat, group=group)) + 
  geom_polygon(fill = &quot;white&quot;) +  # plot polygon (region)
  coord_equal() +  # 
  theme_opts +  # use theme - created above
  ggtitle(&quot;Food Versus Drink Prices&quot;, &quot;@EvaMaeRey | source: data.worldbank.org&quot; )

g</code></pre>
<p><img src="/post/2018-06-12-eat-near-the-big-ben-that-will-cost-you_files/figure-html/unnamed-chunk-7-1.png" width="672" /> … and overlay the information about the burger price.</p>
<pre class="r"><code>g + geom_point(data = data0, 
              aes(x=Longitude, y=Latitude, 
                  group=NULL, fill=`Empire State Burger`), 
              colour=&quot;white&quot;, shape=21, stroke=1, 
              alpha=.75, size = 2, shape = 25) + 
  scale_fill_viridis(option = &quot;magma&quot;, direction = -1)  # use prefered color scale</code></pre>
<p><img src="/post/2018-06-12-eat-near-the-big-ben-that-will-cost-you_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Looks like there are some pricy places to get a burger on the sea!</p>
</div>
<div id="step-3-calculate-restaurant-distances-from-iconic-location-and-plot-prices-as-function-thereof" class="section level1">
<h1>Step 3: Calculate restaurant distances from iconic location and plot prices as function thereof</h1>
<p>Zooming in to focus on a London story, I decided to calculate restaurant distances from the Big Ben using the distm() function from the geosphere package …</p>
<pre class="r"><code># big ben coordinates found on https://www.latlong.net
LondonLat &lt;- 51.510357
LondonLong &lt;- -0.116773

# use for loop to calculate distance for each restaurant to Big Ben
data0$`Kilometers from Big Ben` &lt;- NA
for (i in 1:nrow(data0)){

  data0$`Kilometers from Big Ben`[i] &lt;- 
    distm(c(data0$Longitude[i], data0$Latitude[i]), 
          c(LondonLong, LondonLat))/1000
  
}</code></pre>
<p>… and to plot prices of different food items as a function of that distance, breaking out the plots by menu item.</p>
<pre class="r"><code>data_long = data0 %&gt;% 
  gather(Item, `Menu Item Price`, `Empire State Burger`:MEAL) %&gt;%  # restructure data for graphing
  filter(Item!=&quot;MEAL&quot;, Item!=&quot;Porn Star (glass)&quot;)  # delete a couple of items, reduntant or aggregates

ggplot(data_long) +  # declare data to use
  aes(x = `Kilometers from Big Ben`, y = `Menu Item Price`) +  # declare aesthetic mapping
  geom_point() + # draw points
  facet_wrap(~Item, scales = &quot;free_y&quot;) + # make unique map for each menu item
  ggtitle(&quot;Wetherspoon Pubs&#39; Menu Item Prices  v. Distance from Big Ben&quot;, 
          &quot;Visualization: Gina Reynolds | Source: Financial Times Alphaville&quot;) + 
  geom_smooth() +  # include loess smoother
  labs(y = &quot;Price - £&quot;) + 
  xlim(c(0,10))  # limit distance to closest 10 kilometers</code></pre>
<p><img src="/post/2018-06-12-eat-near-the-big-ben-that-will-cost-you_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>All done. Now your’re probably hungry and thirsty. Perhaps you’d like a burger or chicken tikka?</p>
</div>
