---
title: Central Limit Theorem
author: Gina Reynolds
date: '2018-06-07'
slug: central-limit-theorem
categories: []
tags: []
header:
  caption: ''
  image: ''
---

The Central Limit Theorem gives of clear expectations for random sample means.  A random sample is simply the mean for a random sample from a population of interest. 

If we draw a random sample from a population, and calculate the mean for the sample, how close do we expect our sample mean (observed) to be to the true mean (unobserved).

To think about this more, we conduct a thought experiment accompanied by a computational experiment. 

But it is helpful for us to know the truth.  We are going to be omnicsient in the experiment, but think about the perspective of an observer whose knowledge is limited.

As the omnicsienct being, we will know all about the population, and we will even create it.  The population has a variable x, which we measure for all the units of the population.  

```{r}
x_pop <- runif(100) # create a popluation with measurable x
hist(x_pop)  # what does the distribution look like for x
mean(x_pop)  # True mean of x (popluation mean)
```

Now we consider what a scientist would see if she observed one random sample from the population.  We use the function sample to take a random sample of the population.  The population has 100 members, and we sample 30 with the function sample(), which takes a *random* sample.  

```{r}
x_sample <- 
  sample(x = x_pop,
         size = 30)
mean(x_sample) # sample mean
```

Now we'll get a little more abstract asking the question:  What might we have observed if different samples had been taken?

We are going to use a "forloop" consider all the samples that might have been taken.

A "for loop" simply repeats a routine for you, sometimes with different inputs for each time through the routine.  

Here is a simple for loop.  The loop performs a task (printing "Number:" and the time through the loop) ten times, where the input i changes from 1 to 10. 

```{r}
for(i in 1:10){
print(paste("Number:", i))
}
```

Now back our thought experiment about sampling.  What are our expectations about the distibution of sampling means that might be observed for a random sample of the same size? 

Let's repeat the procedure we did above, ten times through.  We use the forloop to do this work for us. We need to use print() in a forloop to display output.  

```{r}
for(i in 1:10){
  x_sample <- sample(x_pop, 30)
  print(mean(x_sample)) # sample mean  
}
```
Nice!  We see 10 different sample means that we might have observed in the case of different random draws of 30 cases! We begin to see a pattern.  The means are nearby, sometimes lower, sometimes higher to our true value.

By doing this experiment more times, we can even more precisely illustrate our expectations about where possible sampling means fall in relation to the true population mean.  

```{r}
# Expectations for repeated sampling
all_samples_means <- c() # this vector is an empty container where we will save means
for(i in 1:10000){
  x_sample <- sample(x = x_pop, size = 30)
  all_samples_means[i] <- mean(x_sample) # save the mean for trial i in position i in vector 
}
```

Now we have a vector of sample means that we could have observed, if different samples were realized.  

Lets use the hist() function to have a quick look at the distibution of the data.

```{r}
hist(all_samples_means)
```

You will notice that the might-have-been-observed sample means are centered around the true population mean.  And they are also normally distributed.  Exciting!  