<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.41" />
  <meta name="author" content="Evangeline Reynolds">

  
  
  
  
    
      
    
  
  <meta name="description" content="A wide data storage format is an efficient and compact way to store information. And this organization perhaps it makes data easier to inspect. We have wide monitors our laptops and destops. However, for visualization and analysis you generally need to transform this data from the wide format to a “tidy”, long format.
We look at the case where just one variable is stored in a spreadsheet.
library(tidyverse) Suppose you have a data frame of rankings of schools by year, and the initial data set is organized as follows (I just build one with tribble()):">

  
  <link rel="alternate" hreflang="en-us" href="/post/wide-to-long-using-the-tidy-verse/">

  


  

  
  
  <meta name="theme-color" content="#0095eb">
  
  
  
  
    
  
  
    
    
      
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
      
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">
  
  
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700%7cRoboto:400,400italic,700%7cRoboto&#43;Mono">
  
  <link rel="stylesheet" href="/styles.css">
  

  

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="Evangeline M Reynolds">
  <link rel="feed" href="/index.xml" type="application/rss+xml" title="Evangeline M Reynolds">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/post/wide-to-long-using-the-tidy-verse/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@EvaMaeRey">
  <meta property="twitter:creator" content="@EvaMaeRey">
  
  <meta property="og:site_name" content="Evangeline M Reynolds">
  <meta property="og:url" content="/post/wide-to-long-using-the-tidy-verse/">
  <meta property="og:title" content="Wide data to long using the tidyverse (tidyr&#39;s gather function) | Evangeline M Reynolds">
  <meta property="og:description" content="A wide data storage format is an efficient and compact way to store information. And this organization perhaps it makes data easier to inspect. We have wide monitors our laptops and destops. However, for visualization and analysis you generally need to transform this data from the wide format to a “tidy”, long format.
We look at the case where just one variable is stored in a spreadsheet.
library(tidyverse) Suppose you have a data frame of rankings of schools by year, and the initial data set is organized as follows (I just build one with tribble()):">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2018-07-06T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2018-07-06T00:00:00&#43;00:00">
  

  
  

  <title>Wide data to long using the tidyverse (tidyr&#39;s gather function) | Evangeline M Reynolds</title>

</head>
<body id="top" data-spy="scroll" data-target="#toc" data-offset="71" >

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">Evangeline M Reynolds</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      
      <ul class="nav navbar-nav navbar-right">
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#publications_selected">
            
            <span>Publications</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projects</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#teaching">
            
            <span>Teaching</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        
      

      
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    <h1 itemprop="name">Wide data to long using the tidyverse (tidyr&#39;s gather function)</h1>

    

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2018-07-06 00:00:00 &#43;0000 UTC" itemprop="datePublished dateModified">
      Jul 6, 2018
    </time>
  </span>
  <span itemscope itemprop="author publisher" itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Evangeline Reynolds">
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    3 min read
  </span>
  

  
  

  
  
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Wide%20data%20to%20long%20using%20the%20tidyverse%20%28tidyr%27s%20gather%20function%29&amp;url=%2fpost%2fwide-to-long-using-the-tidy-verse%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=%2fpost%2fwide-to-long-using-the-tidy-verse%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fpost%2fwide-to-long-using-the-tidy-verse%2f&amp;title=Wide%20data%20to%20long%20using%20the%20tidyverse%20%28tidyr%27s%20gather%20function%29"
         target="_blank" rel="noopener">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=%2fpost%2fwide-to-long-using-the-tidy-verse%2f&amp;title=Wide%20data%20to%20long%20using%20the%20tidyverse%20%28tidyr%27s%20gather%20function%29"
         target="_blank" rel="noopener">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Wide%20data%20to%20long%20using%20the%20tidyverse%20%28tidyr%27s%20gather%20function%29&amp;body=%2fpost%2fwide-to-long-using-the-tidy-verse%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>


    <div class="article-style" itemprop="articleBody">
      <p>A wide data storage format is an efficient and compact way to store information. And this organization perhaps it makes data easier to inspect. We have wide monitors our laptops and destops. However, for visualization and analysis you generally need to transform this data from the wide format to a “tidy”, long format.</p>
<p>We look at the case where just one variable is stored in a spreadsheet.</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<p>Suppose you have a data frame of rankings of schools by year, and the initial data set is organized as follows (I just build one with tribble()):</p>
<pre class="r"><code>df_wide &lt;- tribble(~rankings_of_schools_by_year, ~`2000`, ~`2001`, ~`2002`,
        &quot;U of Illinois&quot;, 1, 2,  3, 
        &quot;TU Dresden&quot;, 2, 3, 1, 
        &quot;U of Denver&quot;, 3, 1, 1, 
        &quot;Hogwarts&quot;, 4,4,4)

df_wide</code></pre>
<pre><code>## # A tibble: 4 x 4
##   rankings_of_schools_by_year `2000` `2001` `2002`
##   &lt;chr&gt;                        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 U of Illinois                    1      2      3
## 2 TU Dresden                       2      3      1
## 3 U of Denver                      3      1      1
## 4 Hogwarts                         4      4      4</code></pre>
<p>Restructuring the data with gather, I define the names of columns that will contain the information in the column names (year) and the variable of interest (rank).</p>
<pre class="r"><code>df_long &lt;- df_wide %&gt;% gather(key = year, value = rank, `2000`:`2002`)
df_long</code></pre>
<pre><code>## # A tibble: 12 x 3
##    rankings_of_schools_by_year year   rank
##    &lt;chr&gt;                       &lt;chr&gt; &lt;dbl&gt;
##  1 U of Illinois               2000      1
##  2 TU Dresden                  2000      2
##  3 U of Denver                 2000      3
##  4 Hogwarts                    2000      4
##  5 U of Illinois               2001      2
##  6 TU Dresden                  2001      3
##  7 U of Denver                 2001      1
##  8 Hogwarts                    2001      4
##  9 U of Illinois               2002      3
## 10 TU Dresden                  2002      1
## 11 U of Denver                 2002      1
## 12 Hogwarts                    2002      4</code></pre>
<p>Pretty good! But we are not all the way there. Let’s use the code above a base. We need to change the first column name to be more appropriate. Also, the years are encoded as a character variable whereas they should be numeric (in this case integers, as the years are round numbers).</p>
<pre class="r"><code>df_long &lt;- df_wide %&gt;% gather(key = year, value = rank, `2000`:`2002`) %&gt;% 
  rename(school = rankings_of_schools_by_year) %&gt;% 
  mutate(year = as.integer(year))</code></pre>
<pre><code>## Warning: The `printer` argument is deprecated as of rlang 0.3.0.
## This warning is displayed once per session.</code></pre>
<pre class="r"><code>df_long</code></pre>
<pre><code>## # A tibble: 12 x 3
##    school         year  rank
##    &lt;chr&gt;         &lt;int&gt; &lt;dbl&gt;
##  1 U of Illinois  2000     1
##  2 TU Dresden     2000     2
##  3 U of Denver    2000     3
##  4 Hogwarts       2000     4
##  5 U of Illinois  2001     2
##  6 TU Dresden     2001     3
##  7 U of Denver    2001     1
##  8 Hogwarts       2001     4
##  9 U of Illinois  2002     3
## 10 TU Dresden     2002     1
## 11 U of Denver    2002     1
## 12 Hogwarts       2002     4</code></pre>
<p>Note to students: Then you might filter by year: filter(year &gt; 2000).</p>

    </div>

    





    
    

    

    


  </div>
</article>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2018 &middot; 

      Powered by the
      <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
      <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn-large" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Cite</h4>
      </div>
      <div>
        <pre><code class="modal-body tex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-primary btn-outline js-copy-cite" href="#" target="_blank">
          <i class="fa fa-copy"></i> Copy
        </a>
        <a class="btn btn-primary btn-outline js-download-cite" href="#" target="_blank">
          <i class="fa fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    

    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>
    
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
      

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_CHTML" integrity="sha512-tOav5w1OjvsSJzePRtt2uQPFwBoHt1VZcUq8l8nm5284LEKE9FSJBQryzMBzHxY5P0zRdNqEcpLIRVYFNgu1jw==" crossorigin="anonymous"></script>
    
    

  </body>
</html>

